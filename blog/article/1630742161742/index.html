<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <meta name="description" content="é†‰åä¸çŸ¥å¤©åœ¨æ°´, æ»¡èˆ¹æ¸…æ¢¦å‹æ˜Ÿæ²³">
    <link rel="icon" href="/favicon.ico">
    <title>RedisåŸºç¡€</title>
  <link rel="preload" href="/blog/static/js/chunk-vendors.98aa2d5e.js" as="script"><link rel="preload" href="/blog/static/css/app.2a02c875.css" as="style"><link rel="preload" href="/blog/static/js/app.41aa715e.js" as="script"><link rel="preload" href="/blog/static/css/chunk-4b00a56a.e2e22ac3.css" as="style"><link rel="preload" href="/blog/static/js/chunk-4b00a56a.f60616c1.js" as="script"><link rel="preload" href="/blog/static/css/chunk-d54686c8.30e0cc7d.css" as="style"><link rel="preload" href="/blog/static/js/chunk-d54686c8.5143f685.js" as="script"><link rel="prefetch" href="/blog/static/css/chunk-2e3fbe22.a53d4fc3.css"><link rel="prefetch" href="/blog/static/css/chunk-3a5a13a3.2a512b60.css"><link rel="prefetch" href="/blog/static/css/chunk-52bf6e4f.2a374e40.css"><link rel="prefetch" href="/blog/static/css/chunk-b31288f6.c0879475.css"><link rel="prefetch" href="/blog/static/js/chunk-2e3fbe22.ff12df6f.js"><link rel="prefetch" href="/blog/static/js/chunk-3a5a13a3.0cebf565.js"><link rel="prefetch" href="/blog/static/js/chunk-52bf6e4f.1a087b42.js"><link rel="prefetch" href="/blog/static/js/chunk-b31288f6.bfb70cd4.js"><link rel="stylesheet" href="/blog/static/css/app.2a02c875.css"><link rel="stylesheet" href="/blog/static/css/chunk-4b00a56a.e2e22ac3.css"><link rel="stylesheet" href="/blog/static/css/chunk-d54686c8.30e0cc7d.css"><style data-vue-ssr-id="7a22e877:0">.ellipsis {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
html body {
  margin: 0;
  color: #333;
  background-color: #f8f8f8;
}
a {
  text-decoration: none;
  color: #333;
  transition: color 0.3s;
}
a:hover {
  color: #ef4b50;
}
p {
  margin: 0;
}
.markdown-body img {
  margin-top: 10px;
  margin-bottom: 10px;
  box-shadow: 1px 1px 25px #c0c0c0;
}
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.5s;
}
.fade-enter,
.fade-leave-to {
  opacity: 0;
}
</style><style data-vue-ssr-id="015e92e1:0">/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	background: none;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection, code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #9a6e3a;
	/* This background color was intended by the author of this theme. */
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function,
.token.class-name {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style><style data-vue-ssr-id="138fb736:0">.markdown-body .octicon {
  display: inline-block;
  fill: currentColor;
  vertical-align: text-bottom;
}

.markdown-body .anchor {
  float: left;
  line-height: 1;
  margin-left: -20px;
  padding-right: 4px;
}

.markdown-body .anchor:focus {
  outline: none;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
  color: #1b1f23;
  vertical-align: middle;
  visibility: hidden;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
  text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
  visibility: visible;
}

.markdown-body h1:hover .anchor .octicon-link:before,
.markdown-body h2:hover .anchor .octicon-link:before,
.markdown-body h3:hover .anchor .octicon-link:before,
.markdown-body h4:hover .anchor .octicon-link:before,
.markdown-body h5:hover .anchor .octicon-link:before,
.markdown-body h6:hover .anchor .octicon-link:before {
  width: 16px;
  height: 16px;
  content: ' ';
  display: inline-block;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'%3E%3C/path%3E%3C/svg%3E");
}.markdown-body {
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  line-height: 1.5;
  color: #24292e;
  font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word;
}

.markdown-body details {
  display: block;
}

.markdown-body summary {
  display: list-item;
}

.markdown-body a {
  background-color: initial;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline-width: 0;
}

.markdown-body strong {
  font-weight: inherit;
  font-weight: bolder;
}

.markdown-body h1 {
  font-size: 2em;
  margin: .67em 0;
}

.markdown-body img {
  border-style: none;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre {
  font-family: monospace,monospace;
  font-size: 1em;
}

.markdown-body hr {
  box-sizing: initial;
  height: 0;
  overflow: visible;
}

.markdown-body input {
  font: inherit;
  margin: 0;
}

.markdown-body input {
  overflow: visible;
}

.markdown-body [type=checkbox] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body * {
  box-sizing: border-box;
}

.markdown-body input {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

.markdown-body a {
  color: #0366d6;
  text-decoration: none;
}

.markdown-body a:hover {
  text-decoration: underline;
}

.markdown-body strong {
  font-weight: 600;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #dfe2e5;
}

.markdown-body hr:after,
.markdown-body hr:before {
  display: table;
  content: "";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body table {
  border-spacing: 0;
  border-collapse: collapse;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body details summary {
  cursor: pointer;
}

.markdown-body kbd {
  display: inline-block;
  padding: 3px 5px;
  font: 11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;
  line-height: 10px;
  color: #444d56;
  vertical-align: middle;
  background-color: #fafbfc;
  border: 1px solid #d1d5da;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #d1d5da;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body h1 {
  font-size: 32px;
}

.markdown-body h1,
.markdown-body h2 {
  font-weight: 600;
}

.markdown-body h2 {
  font-size: 24px;
}

.markdown-body h3 {
  font-size: 20px;
}

.markdown-body h3,
.markdown-body h4 {
  font-weight: 600;
}

.markdown-body h4 {
  font-size: 16px;
}

.markdown-body h5 {
  font-size: 14px;
}

.markdown-body h5,
.markdown-body h6 {
  font-weight: 600;
}

.markdown-body h6 {
  font-size: 12px;
}

.markdown-body p {
  margin-top: 0;
  margin-bottom: 10px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ol,
.markdown-body ul {
  padding-left: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ol ol ol,
.markdown-body ol ul ol,
.markdown-body ul ol ol,
.markdown-body ul ul ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre {
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body input::-webkit-inner-spin-button,
.markdown-body input::-webkit-outer-spin-button {
  margin: 0;
  -webkit-appearance: none;
  appearance: none;
}

.markdown-body :checked+.radio-label {
  position: relative;
  z-index: 1;
  border-color: #0366d6;
}

.markdown-body .border {
  border: 1px solid #e1e4e8!important;
}

.markdown-body .border-0 {
  border: 0!important;
}

.markdown-body .border-bottom {
  border-bottom: 1px solid #e1e4e8!important;
}

.markdown-body .rounded-1 {
  border-radius: 3px!important;
}

.markdown-body .bg-white {
  background-color: #fff!important;
}

.markdown-body .bg-gray-light {
  background-color: #fafbfc!important;
}

.markdown-body .text-gray-light {
  color: #6a737d!important;
}

.markdown-body .mb-0 {
  margin-bottom: 0!important;
}

.markdown-body .my-2 {
  margin-top: 8px!important;
  margin-bottom: 8px!important;
}

.markdown-body .pl-0 {
  padding-left: 0!important;
}

.markdown-body .py-0 {
  padding-top: 0!important;
  padding-bottom: 0!important;
}

.markdown-body .pl-1 {
  padding-left: 4px!important;
}

.markdown-body .pl-2 {
  padding-left: 8px!important;
}

.markdown-body .py-2 {
  padding-top: 8px!important;
  padding-bottom: 8px!important;
}

.markdown-body .pl-3,
.markdown-body .px-3 {
  padding-left: 16px!important;
}

.markdown-body .px-3 {
  padding-right: 16px!important;
}

.markdown-body .pl-4 {
  padding-left: 24px!important;
}

.markdown-body .pl-5 {
  padding-left: 32px!important;
}

.markdown-body .pl-6 {
  padding-left: 40px!important;
}

.markdown-body .f6 {
  font-size: 12px!important;
}

.markdown-body .lh-condensed {
  line-height: 1.25!important;
}

.markdown-body .text-bold {
  font-weight: 600!important;
}

.markdown-body .pl-c {
  color: #6a737d;
}

.markdown-body .pl-c1,
.markdown-body .pl-s .pl-v {
  color: #005cc5;
}

.markdown-body .pl-e,
.markdown-body .pl-en {
  color: #6f42c1;
}

.markdown-body .pl-s .pl-s1,
.markdown-body .pl-smi {
  color: #24292e;
}

.markdown-body .pl-ent {
  color: #22863a;
}

.markdown-body .pl-k {
  color: #d73a49;
}

.markdown-body .pl-pds,
.markdown-body .pl-s,
.markdown-body .pl-s .pl-pse .pl-s1,
.markdown-body .pl-sr,
.markdown-body .pl-sr .pl-cce,
.markdown-body .pl-sr .pl-sra,
.markdown-body .pl-sr .pl-sre {
  color: #032f62;
}

.markdown-body .pl-smw,
.markdown-body .pl-v {
  color: #e36209;
}

.markdown-body .pl-bu {
  color: #b31d28;
}

.markdown-body .pl-ii {
  color: #fafbfc;
  background-color: #b31d28;
}

.markdown-body .pl-c2 {
  color: #fafbfc;
  background-color: #d73a49;
}

.markdown-body .pl-c2:before {
  content: "^M";
}

.markdown-body .pl-sr .pl-cce {
  font-weight: 700;
  color: #22863a;
}

.markdown-body .pl-ml {
  color: #735c0f;
}

.markdown-body .pl-mh,
.markdown-body .pl-mh .pl-en,
.markdown-body .pl-ms {
  font-weight: 700;
  color: #005cc5;
}

.markdown-body .pl-mi {
  font-style: italic;
  color: #24292e;
}

.markdown-body .pl-mb {
  font-weight: 700;
  color: #24292e;
}

.markdown-body .pl-md {
  color: #b31d28;
  background-color: #ffeef0;
}

.markdown-body .pl-mi1 {
  color: #22863a;
  background-color: #f0fff4;
}

.markdown-body .pl-mc {
  color: #e36209;
  background-color: #ffebda;
}

.markdown-body .pl-mi2 {
  color: #f6f8fa;
  background-color: #005cc5;
}

.markdown-body .pl-mdr {
  font-weight: 700;
  color: #6f42c1;
}

.markdown-body .pl-ba {
  color: #586069;
}

.markdown-body .pl-sg {
  color: #959da5;
}

.markdown-body .pl-corl {
  text-decoration: underline;
  color: #032f62;
}

.markdown-body .mb-0 {
  margin-bottom: 0!important;
}

.markdown-body .my-2 {
  margin-bottom: 8px!important;
}

.markdown-body .my-2 {
  margin-top: 8px!important;
}

.markdown-body .pl-0 {
  padding-left: 0!important;
}

.markdown-body .py-0 {
  padding-top: 0!important;
  padding-bottom: 0!important;
}

.markdown-body .pl-1 {
  padding-left: 4px!important;
}

.markdown-body .pl-2 {
  padding-left: 8px!important;
}

.markdown-body .py-2 {
  padding-top: 8px!important;
  padding-bottom: 8px!important;
}

.markdown-body .pl-3 {
  padding-left: 16px!important;
}

.markdown-body .pl-4 {
  padding-left: 24px!important;
}

.markdown-body .pl-5 {
  padding-left: 32px!important;
}

.markdown-body .pl-6 {
  padding-left: 40px!important;
}

.markdown-body .pl-7 {
  padding-left: 48px!important;
}

.markdown-body .pl-8 {
  padding-left: 64px!important;
}

.markdown-body .pl-9 {
  padding-left: 80px!important;
}

.markdown-body .pl-10 {
  padding-left: 96px!important;
}

.markdown-body .pl-11 {
  padding-left: 112px!important;
}

.markdown-body .pl-12 {
  padding-left: 128px!important;
}

.markdown-body hr {
  border-bottom-color: #eee;
}

.markdown-body kbd {
  display: inline-block;
  padding: 3px 5px;
  font: 11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;
  line-height: 10px;
  color: #444d56;
  vertical-align: middle;
  background-color: #fafbfc;
  border: 1px solid #d1d5da;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #d1d5da;
}

.markdown-body:after,
.markdown-body:before {
  display: table;
  content: "";
}

.markdown-body:after {
  clear: both;
}

.markdown-body>:first-child {
  margin-top: 0!important;
}

.markdown-body>:last-child {
  margin-bottom: 0!important;
}

.markdown-body a:not([href]) {
  color: inherit;
  text-decoration: none;
}

.markdown-body blockquote,
.markdown-body details,
.markdown-body dl,
.markdown-body ol,
.markdown-body p,
.markdown-body pre,
.markdown-body table,
.markdown-body ul {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: .25em;
  padding: 0;
  margin: 24px 0;
  background-color: #e1e4e8;
  border: 0;
}

.markdown-body blockquote {
  padding: 0 1em;
  color: #6a737d;
  border-left: .25em solid #dfe2e5;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 24px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25;
}

.markdown-body h1 {
  font-size: 2em;
}

.markdown-body h1,
.markdown-body h2 {
  padding-bottom: .3em;
  border-bottom: 1px solid #eaecef;
}

.markdown-body h2 {
  font-size: 1.5em;
}

.markdown-body h3 {
  font-size: 1.25em;
}

.markdown-body h4 {
  font-size: 1em;
}

.markdown-body h5 {
  font-size: .875em;
}

.markdown-body h6 {
  font-size: .85em;
  color: #6a737d;
}

.markdown-body ol,
.markdown-body ul {
  padding-left: 2em;
}

.markdown-body ol ol,
.markdown-body ol ul,
.markdown-body ul ol,
.markdown-body ul ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li {
  word-wrap: break-all;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body li+li {
  margin-top: .25em;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: 600;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
}

.markdown-body table th {
  font-weight: 600;
}

.markdown-body table td,
.markdown-body table th {
  padding: 6px 13px;
  border: 1px solid #dfe2e5;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #c6cbd1;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f6f8fa;
}

.markdown-body img {
  max-width: 100%;
  box-sizing: initial;
  background-color: #fff;
}

.markdown-body img[align=right] {
  padding-left: 20px;
}

.markdown-body img[align=left] {
  padding-right: 20px;
}

.markdown-body code {
  padding: .2em .4em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(27,31,35,.05);
  border-radius: 3px;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .highlight {
  margin-bottom: 16px;
}

.markdown-body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body .highlight pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f6f8fa;
  border-radius: 3px;
}

.markdown-body pre code {
  display: inline;
  max-width: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  line-height: inherit;
  word-wrap: normal;
  background-color: initial;
  border: 0;
}

.markdown-body .commit-tease-sha {
  display: inline-block;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;
  font-size: 90%;
  color: #444d56;
}

.markdown-body .full-commit .btn-outline:not(:disabled):hover {
  color: #005cc5;
  border-color: #005cc5;
}

.markdown-body .blob-wrapper {
  overflow-x: auto;
  overflow-y: hidden;
}

.markdown-body .blob-wrapper-embedded {
  max-height: 240px;
  overflow-y: auto;
}

.markdown-body .blob-num {
  width: 1%;
  min-width: 50px;
  padding-right: 10px;
  padding-left: 10px;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;
  font-size: 12px;
  line-height: 20px;
  color: rgba(27,31,35,.3);
  text-align: right;
  white-space: nowrap;
  vertical-align: top;
  cursor: pointer;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.markdown-body .blob-num:hover {
  color: rgba(27,31,35,.6);
}

.markdown-body .blob-num:before {
  content: attr(data-line-number);
}

.markdown-body .blob-code {
  position: relative;
  padding-right: 10px;
  padding-left: 10px;
  line-height: 20px;
  vertical-align: top;
}

.markdown-body .blob-code-inner {
  overflow: visible;
  font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;
  font-size: 12px;
  color: #24292e;
  word-wrap: normal;
  white-space: pre;
}

.markdown-body .pl-token.active,
.markdown-body .pl-token:hover {
  cursor: pointer;
  background: #ffea7f;
}

.markdown-body .tab-size[data-tab-size="1"] {
  -moz-tab-size: 1;
  -o-tab-size: 1;
     tab-size: 1;
}

.markdown-body .tab-size[data-tab-size="2"] {
  -moz-tab-size: 2;
  -o-tab-size: 2;
     tab-size: 2;
}

.markdown-body .tab-size[data-tab-size="3"] {
  -moz-tab-size: 3;
  -o-tab-size: 3;
     tab-size: 3;
}

.markdown-body .tab-size[data-tab-size="4"] {
  -moz-tab-size: 4;
  -o-tab-size: 4;
     tab-size: 4;
}

.markdown-body .tab-size[data-tab-size="5"] {
  -moz-tab-size: 5;
  -o-tab-size: 5;
     tab-size: 5;
}

.markdown-body .tab-size[data-tab-size="6"] {
  -moz-tab-size: 6;
  -o-tab-size: 6;
     tab-size: 6;
}

.markdown-body .tab-size[data-tab-size="7"] {
  -moz-tab-size: 7;
  -o-tab-size: 7;
     tab-size: 7;
}

.markdown-body .tab-size[data-tab-size="8"] {
  -moz-tab-size: 8;
  -o-tab-size: 8;
     tab-size: 8;
}

.markdown-body .tab-size[data-tab-size="9"] {
  -moz-tab-size: 9;
  -o-tab-size: 9;
     tab-size: 9;
}

.markdown-body .tab-size[data-tab-size="10"] {
  -moz-tab-size: 10;
  -o-tab-size: 10;
     tab-size: 10;
}

.markdown-body .tab-size[data-tab-size="11"] {
  -moz-tab-size: 11;
  -o-tab-size: 11;
     tab-size: 11;
}

.markdown-body .tab-size[data-tab-size="12"] {
  -moz-tab-size: 12;
  -o-tab-size: 12;
     tab-size: 12;
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 .2em .25em -1.6em;
  vertical-align: middle;
}
</style><style data-vue-ssr-id="64cc030e:0">.ellipsis[data-v-7ba5bd90] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.app[data-v-7ba5bd90] {
  min-width: 1024px;
}
.app .container-wrapper[data-v-7ba5bd90] {
  display: flex;
  justify-content: center;
  margin-top: 16px;
}
.app .container-wrapper .container[data-v-7ba5bd90] {
  width: 1024px;
}
@media (max-width: 500px) {
.app[data-v-7ba5bd90] {
    min-width: unset;
}
.app .container-wrapper .container[data-v-7ba5bd90] {
    width: 100%;
}
.app .back-top[data-v-7ba5bd90] {
    display: none;
}
}
</style><style data-vue-ssr-id="376aac50:0">.ellipsis[data-v-d2cca71c] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.nav-wrapper[data-v-d2cca71c] {
  display: flex;
  justify-content: center;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  background-color: #fff;
}
.nav-wrapper .nav[data-v-d2cca71c] {
  width: 1024px;
  height: 56px;
}
.nav-wrapper .nav .nav-actions[data-v-d2cca71c] {
  display: flex;
  height: 100%;
}
.nav-wrapper .nav .nav-actions .nav-action-link[data-v-d2cca71c] {
  margin-left: 20px;
  height: 100%;
}
.nav-wrapper .nav .nav-actions .nav-action-link[data-v-d2cca71c]:first-child {
  margin-left: 0;
}
.nav-wrapper .nav .nav-actions .nav-action-wrapper[data-v-d2cca71c] {
  display: flex;
  align-items: center;
  padding-left: 10px;
  padding-right: 10px;
  height: calc(100% - 3px);
  font-size: 14px;
  transition: color 0.3s;
}
.nav-wrapper .nav .nav-actions .nav-action-wrapper[data-v-d2cca71c]:hover {
  color: #ef4b50;
}
.nav-wrapper .nav .nav-actions .nav-action-wrapper .menu-icon[data-v-d2cca71c] {
  margin-right: 5px;
}
.nav-wrapper .nav .nav-actions .nav-action-wrapper_selected[data-v-d2cca71c] {
  position: relative;
  color: #ef4b50;
  border-bottom: 3px solid #ef4b50;
}
</style><style data-vue-ssr-id="86fe8408:0">.ellipsis[data-v-d95f0bf6] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.article-wrapper[data-v-d95f0bf6] {
  display: flex;
}
.article-wrapper .article[data-v-d95f0bf6] {
  overflow-x: hidden;
}
.article-wrapper .article .banner .banner-image[data-v-d95f0bf6] {
  width: 100%;
}
.article-wrapper .article .title[data-v-d95f0bf6] {
  margin-bottom: 0;
  margin-top: 20px;
  font-size: 30px;
  line-height: 35px;
}
.article-wrapper .article .info[data-v-d95f0bf6] {
  margin-top: 40px;
}
.article-wrapper .article .info[data-v-d95f0bf6] .info-block {
  font-size: 14px;
}
.article-wrapper .article .content[data-v-d95f0bf6] {
  margin-top: 40px;
}
.article-wrapper .article .recommend[data-v-d95f0bf6] {
  display: flex;
  margin-top: 40px;
  margin-bottom: 40px;
  font-size: 14px;
}
.article-wrapper .article .recommend .recommend-block-text[data-v-d95f0bf6] {
  margin-right: 5px;
}
.article-wrapper .article .recommend .recommend-block[data-v-d95f0bf6] {
  display: flex;
  flex-grow: 1;
  flex-shrink: 0;
}
@media (max-width: 500px) {
.article-wrapper .article .recommend .recommend-last[data-v-d95f0bf6] {
    display: none;
}
}
.article-wrapper .article .recommend .recommend-next[data-v-d95f0bf6] {
  display: flex;
  justify-content: flex-end;
}
.article-wrapper .article .footer[data-v-d95f0bf6] {
  margin-bottom: 40px;
  text-align: center;
}
.article-wrapper .article .footer .footer-button[data-v-d95f0bf6] {
  margin-left: 10px;
}
.article-wrapper .article .footer .footer-button[data-v-d95f0bf6]:first-child {
  margin-left: 0;
}
@media (max-width: 500px) {
.catalogue-wrapper[data-v-d95f0bf6] {
    display: none;
}
}
.catalogue-wrapper_toggle[data-v-d95f0bf6] {
  flex-shrink: 0;
  margin-left: 10px;
}
.catalogue-wrapper_toggle .catalogue[data-v-d95f0bf6] {
  position: sticky;
  top: 0;
}
.catalogue-wrapper_untoggle[data-v-d95f0bf6] {
  position: fixed;
  bottom: 130px;
  right: 60px;
}
</style><style data-vue-ssr-id="e6ede62e:0">.ellipsis[data-v-54a33415] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.card[data-v-54a33415] {
  padding: 24px;
  border-radius: 2px;
  box-shadow: 0px 0px 1px rgba(41, 45, 51, 0.1), 0px 1px 2px rgba(41, 45, 51, 0.1);
  box-sizing: border-box;
  background-color: #fff;
}
</style><style data-vue-ssr-id="6badcd76:0">.ellipsis[data-v-eab015b2] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.image-preview[data-v-eab015b2] {
  width: 100%;
}
.image-preview .image[data-v-eab015b2] {
  width: 100%;
  cursor: zoom-in;
}
.image-preview .title[data-v-eab015b2] {
  text-align: center;
  font-size: 14px;
  color: #999;
}
</style><style data-vue-ssr-id="1a750016:0">.ellipsis[data-v-771e5855] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.image-fail-wrapper[data-v-771e5855] {
  display: flex;
  justify-content: center;
  align-items: center;
}
.image-fail-wrapper .image-fail[data-v-771e5855] {
  max-width: 250px;
}
</style><style data-vue-ssr-id="4c88cc77:0">.ellipsis[data-v-01771278] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.info[data-v-01771278] {
  font-size: 12px;
  line-height: 18px;
  color: #666;
}
.info .info-block[data-v-01771278]::before {
  content: '|';
  margin-left: 10px;
  margin-right: 10px;
  font-weight: 600;
}
.info .info-block[data-v-01771278]:first-child::before {
  content: '';
  margin-left: 0;
  margin-right: 0;
}
</style><style data-vue-ssr-id="fec05da4:0">.ellipsis[data-v-c80b520e] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.line[data-v-c80b520e] {
  margin: 60px 8% 60px 8%;
  height: 1px;
  background-color: #d1d1d1;
}
</style><style data-vue-ssr-id="6bf8c9bc:0">.ellipsis[data-v-ce68c092] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.catalogue-card_toggle[data-v-ce68c092] {
  width: 240px;
  max-height: 100vh;
  font-size: 14px;
  line-height: 20px;
  overflow-y: auto;
}
.catalogue-card_toggle:hover .title .title-footer[data-v-ce68c092] {
  visibility: visible;
}
.catalogue-card_toggle .title[data-v-ce68c092] {
  position: relative;
  margin-bottom: 14px;
  font-weight: 500;
}
.catalogue-card_toggle .title .title-footer[data-v-ce68c092] {
  position: absolute;
  right: 0;
  top: 0;
  font-weight: 400;
  color: #ef4b50;
  visibility: hidden;
  cursor: pointer;
}
.catalogue-card_untoggle-wrapper .catalogue-card_untoggle[data-v-ce68c092] {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0;
  width: 50px;
  height: 50px;
  font-size: 20px;
  border-radius: 100%;
  transition: color 0.3s;
  cursor: pointer;
}
.catalogue-card_untoggle-wrapper .catalogue-card_untoggle[data-v-ce68c092]:hover {
  color: #ef4b50;
}
</style><style data-vue-ssr-id="2a259861:0">.ellipsis[data-v-292518fe] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.icon[data-v-292518fe] {
  width: 1em;
  height: 1em;
  vertical-align: -0.15em;
  fill: currentColor;
  overflow: hidden;
}
</style><style data-vue-ssr-id="9fa28770:0">.ellipsis[data-v-fdb56dc8] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.footer[data-v-fdb56dc8] {
  margin-top: 80px;
  padding-top: 10px;
  padding-bottom: 10px;
  text-align: center;
  font-size: 12px;
  line-height: 20px;
}
@media (max-width: 500px) {
.footer[data-v-fdb56dc8] {
    margin-top: 0;
}
}
</style><style data-vue-ssr-id="0dde9044:0">.ellipsis[data-v-876fde0e] {
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.back-top[data-v-876fde0e] {
  position: fixed;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 50px;
  height: 50px;
  font-size: 20px;
  border-radius: 100%;
  box-shadow: 0px 0px 1px rgba(41, 45, 51, 0.1), 0px 1px 2px rgba(41, 45, 51, 0.1);
  background-color: #fff;
  transition: color 0.3s;
  cursor: pointer;
}
.back-top[data-v-876fde0e]:hover {
  color: #ef4b50;
}
</style></head>
  <body>
    <div id="app" data-server-rendered="true" class="app" data-v-7ba5bd90><header class="nav-wrapper" data-v-d2cca71c data-v-7ba5bd90><div class="nav" data-v-d2cca71c><div class="nav-actions" data-v-d2cca71c><a href="/blog/" class="nav-action-link router-link-active" data-v-d2cca71c><div class="nav-action-wrapper" data-v-d2cca71c><span data-v-d2cca71c>é¦–é¡µ</span></div></a><a href="/blog/columns" class="nav-action-link" data-v-d2cca71c><div class="nav-action-wrapper" data-v-d2cca71c><span data-v-d2cca71c>ä¸“æ </span></div></a></div></div></header><div class="container-wrapper" data-v-7ba5bd90><div class="container" data-v-7ba5bd90><div class="article-wrapper" data-v-d95f0bf6 data-v-7ba5bd90><div class="card article" data-v-54a33415 data-v-d95f0bf6><!----><h1 class="title" data-v-54a33415 data-v-d95f0bf6>RedisåŸºç¡€</h1><div class="markdown-body content" data-v-d95f0bf6><p><a href="http://redisdoc.com/index.html">Redisæ–‡æ¡£</a></p> <h2 id="heading-0">ä¸€. Macå®‰è£…ä¸å¯åŠ¨</h2><pre class="language-shell"><code tabindex="0" class="language-shell">$ brew <span class="token function">install</span> redis
To have launchd start redis now and restart at login:
  brew services start redis
Or, <span class="token keyword">if</span> you don't want/need a background <span class="token function">service</span> you can just run:
  redis-server /usr/local/etc/redis.conf
<span class="token operator">==</span><span class="token operator">></span> Summary
ğŸº  /usr/local/Cellar/redis/5.0.6: <span class="token number">13</span> files, <span class="token number">3</span>.1MB
<span class="token comment"># é…ç½®æ–‡ä»¶è·¯å¾„: /usr/local/etc/redis.conf</span>
<span class="token comment"># å®‰è£…è·¯å¾„: /usr/local/Cellar/redis/5.0.6</span>
<span class="token comment"># å¯åŠ¨</span>
$ redis-server /usr/local/etc/redis.conf
<span class="token comment"># å¯åŠ¨å¹¶åœ¨åå°è¿è¡Œ</span>
$ brew services start redis
<span class="token comment"># è¿æ¥</span>
$ redis-cli -h <span class="token number">127.0</span>.0.1 -p <span class="token number">6379</span></code></pre><ol><li><p>redisé»˜è®¤æ˜¯å‰å°å¯åŠ¨,ä¸æ˜¯ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿›è¡Œ:<code>daemonize no</code>,æŠŠè¿™é‡Œä¿®æ”¹æˆ<code>yes</code>,å°±å¯ä»¥è®©redisä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨</p></li> <li><p>å½“redisä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œ,ä¼šé»˜è®¤æŠŠpidå†™å…¥/var/run/reids.pidæ–‡ä»¶ä¸­,å¯ä»¥é€šè¿‡<code>pidfile /var/run/redis.pid</code>è¿›è¡ŒæŒ‡å®š</p></li> <li><p>ç«¯å£å·æŒ‡å®š,é»˜è®¤æ˜¯<code>6379</code>,å¯ä»¥æ ¹æ®éœ€è¦è‡ªå·±ä¿®æ”¹</p></li> <li><p>å®¢æˆ·ç«¯å¦‚æœä¸€ç›´è¿æ¥ç€ä¸é‡Šæ”¾çš„è¯ä¼šè‡ªåŠ¨å…³é—­è¿æ¥,è¿™æ˜¯é€šè¿‡<code>timeout 100</code>æ¥è®¾å®šçš„,å¦‚æœè®¾ç½®ä¸º0è¡¨ç¤ºä¸ä¼šè‡ªåŠ¨å…³é—­</p></li> <li><p>è®¾ç½®redisæ•°æ®åº“çš„æ•°é‡, databases 16 é»˜è®¤æ˜¯16</p></li></ol> <h2 id="heading-1">äºŒ. æ•°æ®ç±»å‹</h2><ul><li>string å­—ç¬¦ä¸²</li> <li>Hash å“ˆå¸Œ</li> <li>list åˆ—è¡¨</li> <li>set é›†åˆ</li> <li>zset æœ‰åºé›†åˆ</li></ul> <h3 id="heading-2">1.string</h3><pre class="language-shell"><code tabindex="0" class="language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> hello world
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get hello
world</code></pre><ul><li><p>SET key value [EX seconds] [PX milliseconds] [NX|XX]</p> <p>  EXè¡¨ç¤ºç§’ï¼ŒPXè¡¨ç¤ºæ¯«ç§’</p> <p>  NXè¡¨ç¤ºåªåœ¨é”®ä¸å­˜åœ¨æ—¶æ‰å¯¹é”®è¿›è¡Œè®¾ç½®æ“ä½œï¼ŒXXè¡¨ç¤ºåªåœ¨é”®å·²ç»å­˜åœ¨æ—¶æ‰å¯¹é”®è¿›è¡Œè®¾ç½®æ“ä½œ</p></li></ul> <pre class="language-shell"><code tabindex="0" class="language-shell"><span class="token comment"># åªæœ‰å½“helloä¸å­˜åœ¨æˆ–è¿‡æœŸçš„æ—¶å€™æ‰å¯¹å…¶æ“ä½œ</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> hello world EX <span class="token number">100</span> NX
<span class="token comment"># 100så†…å¯¹å…¶è¦†ç›–æ“ä½œ</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> hello newWorld EX <span class="token number">10</span> NX
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span></code></pre><h3 id="heading-3">2.hash</h3><p>Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ key å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡</p> <p>string æ˜¯ ä¸€ä¸ª key - value é”®å€¼å¯¹ï¼Œè€Œ hash æ˜¯å¤šä¸ª key - value é”®å€¼å¯¹</p> <pre class="language-shell"><code tabindex="0" class="language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hset Jack name Jack
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hset Jack age <span class="token number">20</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hset Jack class <span class="token number">2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token comment"># è·å– hash-key è¿™ä¸ª hash é‡Œé¢çš„æ‰€æœ‰é”®å€¼å¯¹</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hgetall Jack
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"name"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"Jack"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"age"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"20"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"class"</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"2"</span>
<span class="token comment"># åˆ é™¤ hash-key è¿™ä¸ª hash é‡Œé¢çš„ age é”®å€¼å¯¹</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hdel Jack age
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> hget Jack age
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token comment"># åˆ é™¤æ•´ä¸ªhash</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> del Jack</code></pre><h3 id="heading-4">3.list</h3><pre class="language-shell"><code tabindex="0" class="language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> rpush color blue
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> rpush color white
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> rpush color red
<span class="token comment"># è·å–æŸä¸ªlistå…ƒç´ </span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lindex color <span class="token number">1</span>
<span class="token string">"red"</span>
<span class="token comment"># æŒ‰ç´¢å¼•éå†list</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange color <span class="token number">0</span> <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"blue"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"white"</span>
<span class="token comment"># éå†æ•´ä¸ªlist, å³0~-1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange color <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"blue"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"white"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"red"</span>
<span class="token comment"># åˆ é™¤ä¸€ä¸ªlistï¼Œåˆ é™¤çš„æ˜¯æœ€åçš„å…ƒç´ blue    </span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lpop color
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange color <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"white"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"red"</span></code></pre><h3 id="heading-5">4.set</h3><pre class="language-shell"><code tabindex="0" class="language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> sadd color blue
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> sadd color white
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> sadd color red
<span class="token comment"># è·å–æ•´ä¸ªset</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> smembers color
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"white"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"blue"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"red"</span>
<span class="token comment"># æ·»åŠ é‡å¤å…ƒç´ æŸ¥çœ‹ï¼Œæ²¡æœ‰å˜åŒ–</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> sadd color blue
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> smembers color
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"white"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"blue"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"red"</span></code></pre><p>redis çš„ set æ˜¯ä¸€ä¸ª key å¯¹åº”ç€ å¤šä¸ªå­—ç¬¦ä¸²ç±»å‹çš„ valueï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„é›†åˆ</p> <p>ä½†æ˜¯å’Œ list ä¸åŒçš„æ˜¯ set ä¸­çš„å­—ç¬¦ä¸²é›†åˆå…ƒç´ ä¸èƒ½é‡å¤ï¼Œä½†æ˜¯ list å¯ä»¥</p> <h3 id="heading-6">5.Zset</h3><p>zset å’Œ set ä¸€æ ·éƒ½æ˜¯ å­—ç¬¦ä¸²ç±»å‹å…ƒç´ çš„é›†åˆï¼Œå¹¶ä¸”é›†åˆå†…çš„å…ƒç´ ä¸èƒ½é‡å¤ã€‚</p> <p>ä¸åŒçš„æ˜¯ï¼Œzset æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ª double ç±»å‹çš„åˆ†æ•°ã€‚redis é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚</p> <p>zset çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ï¼Œä½†æ˜¯åˆ†æ•°ï¼ˆscoreï¼‰å´å¯ä»¥é‡å¤</p> <pre class="language-shell"><code tabindex="0" class="language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zadd zcolor <span class="token number">100</span> blue
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zadd zcolor <span class="token number">200</span> red
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zadd zcolor <span class="token number">150</span> white
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrange zcolor <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"blue"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"white"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"red"</span></code></pre><p>å¯ä»¥çœ‹åˆ°redæœ€å¤§æ’åœ¨äº†æœ€åï¼Œå¦‚æœé‡å¤å…ƒç´ å¹¶ä¿æŒåˆ†æ•°ä¸å˜å‘¢</p> <pre class="language-shell"><code tabindex="0" class="language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zadd zcolor <span class="token number">200</span> red
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrange zcolor <span class="token number">0</span> -1 withscores
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"blue"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"100"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"white"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"150"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"red"</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"200"</span></code></pre><p>redæ²¡æœ‰å˜åŒ–ï¼Œå¦‚æœé‡å¤å…ƒç´ å¹¶æ”¹å˜åˆ†æ•°å‘¢</p> <pre class="language-shell"><code tabindex="0" class="language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zadd zcolor <span class="token number">120</span> red
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> zrange zcolor <span class="token number">0</span> -1 withscores
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"blue"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"100"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"red"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"120"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"white"</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"150"</span></code></pre><p>å¯ä»¥çœ‹åˆ°redå˜æˆäº†120ï¼Œæ’åˆ°äº†whiteå‰é¢</p> <h3 id="heading-7">6. æ•°æ®æ·˜æ±°ç­–ç•¥</h3><ul><li>   volatile-lruï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­æŒ‘é€‰<strong>æœ€è¿‘æœ€å°‘ä½¿ç”¨</strong>çš„æ•°æ®æ·˜æ±°</li> <li>   volatile-ttlï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­æŒ‘é€‰<strong>å°†è¦è¿‡æœŸ</strong>çš„æ•°æ®æ·˜æ±°</li> <li>   volatile-randomï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ä¸­<strong>ä»»æ„é€‰æ‹©</strong>æ•°æ®æ·˜æ±°</li> <li>   Volatile-fluï¼šä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†æŒ‘é€‰ä½¿ç”¨<strong>é¢‘ç‡æœ€ä½</strong>çš„æ•°æ®æ·˜æ±°</li> <li>   Allkeys-lruï¼šä»æ•°æ®é›†ä¸­æŒ‘é€‰<strong>æœ€è¿‘æœ€å°‘ä½¿ç”¨</strong>çš„æ•°æ®æ·˜æ±°</li> <li>   Allkeys-randomï¼šä»æ•°æ®é›†ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±°</li> <li>   Allkeys-fluï¼šä»æ•°æ®é›†ä¸­æŒ‘é€‰ä½¿ç”¨é¢‘ç‡æœ€ä½çš„æ•°æ®æ·˜æ±°</li> <li>   no-envictionï¼ˆé©±é€ï¼‰ï¼šç¦æ­¢é©±é€æ•°æ®ï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤ç­–ç•¥ã€‚    +    å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œå°±ä¼šæŠ¥é”™ï¼Œè¯·æ±‚å¯ä»¥ç»§ç»­è¿›è¡Œï¼Œçº¿ä¸Šä»»åŠ¡ä¹Ÿä¸èƒ½æŒç»­è¿›è¡Œï¼Œé‡‡ç”¨no-envictionç­–ç•¥å¯ä»¥ä¿è¯æ•°æ®ä¸è¢«ä¸¢å¤±ã€‚</li></ul> <h4 id="heading-8">æ·˜æ±°æœºåˆ¶</h4><ul><li>æ¶ˆææ–¹æ³•ï¼šè¢«è®¿é—®æ—¶å¦‚æœä¸å­˜åœ¨å†åˆ é™¤</li> <li>ç§¯ææ–¹æ³•ï¼šå‘¨æœŸæ€§åœ°æ¢æµ‹ï¼Œå‘ç°å¤±æ•ˆå°±åˆ é™¤</li> <li>ä¸»åŠ¨åˆ é™¤ï¼šå½“å†…å­˜è¶…è¿‡maxmemoryé™å®šæ—¶ï¼Œè§¦å‘ä¸»åŠ¨æ¸…ç†ç­–ç•¥</li></ul> <h2 id="heading-9">ä¸‰. å®ç°</h2><h3 id="heading-10">1. rediså¯¹è±¡åˆ†ç±»</h3><ul><li>string å­—ç¬¦ä¸²</li> <li>Hash å“ˆå¸Œ</li> <li>list åˆ—è¡¨</li> <li>set é›†åˆ</li> <li>zset æœ‰åºé›†åˆ</li></ul> <p>Redisä½¿ç”¨å¯¹è±¡æ¥è¡¨ç¤ºæ•°æ®åº“ä¸­çš„é”®å’Œå€¼ï¼Œå³æ¯æ–°å»ºä¸€ä¸ªé”®å€¼å¯¹ï¼Œè‡³å°‘åˆ›å»ºä¸¤ä¸ªå¯¹è±¡(é”®å’Œå€¼éƒ½ä¸ºå¯¹è±¡)ï¼Œæ¯”å¦‚åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²</p> <pre class="language-text"><code tabindex="0" class="language-text">127.0.0.1:6379> set name mittacy
OK</code></pre><p>nameå’Œmittacyéƒ½æ˜¯ä¸€ä¸ªstringå­—ç¬¦ä¸²å¯¹è±¡</p> <p>è¿™æ ·çš„å¥½å¤„æœ‰ï¼š</p> <ol><li>rediså¯ä»¥åœ¨æ‰§è¡Œå‘½ä»¤å‰æ ¹æ®å¯¹è±¡çš„ç±»å‹åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥æ‰§è¡Œç»™å®šçš„å‘½ä»¤</li> <li>é’ˆå¯¹ä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼Œä¸ºå¯¹è±¡è®¾ç½®ä¸åŒçš„æ•°æ®ç»“æ„å®ç°ï¼Œä»è€Œä¼˜åŒ–å¯¹è±¡çš„ä¸åŒåœºæ™¯ä¸‹çš„ä½¿ç”¨æ•ˆç‡</li> <li>å¯¹è±¡ç³»ç»Ÿè¿˜å¯ä»¥åŸºäºå¼•ç”¨è®¡æ•°çš„å†…å­˜å›æ”¶æœºåˆ¶ï¼Œè‡ªåŠ¨é‡Šæ”¾å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ï¼Œæˆ–è€…è¿˜å¯ä»¥è®©å¤šä¸ªé”®å…±ç”¨åŒä¸€ä¸ªå€¼å¯¹è±¡</li> <li>rediså¯¹è±¡å¸¦æœ‰è®¿é—®æ—¶é—´è®°å½•ä¿¡æ¯ï¼Œä½¿ç”¨è¯¥ä¿¡æ¯å¯ä»¥è¿›è¡Œä¼˜åŒ–ç©ºè½¬æ—¶é•¿è¾ƒå¤§çš„keyï¼Œè¿›è¡Œåˆ é™¤</li></ol> <h4 id="heading-11">objectç»“æ„</h4><pre class="language-c"><code tabindex="0" class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">redisObject</span> <span class="token punctuation">{</span>
  <span class="token keyword">unsigned</span> tyoe<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">// ç±»å‹</span>
  <span class="token keyword">unsigned</span> encoding<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">// ç¼–ç ç±»å‹</span>
  <span class="token keyword">void</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span>    <span class="token comment">// æŒ‡å‘åº•å±‚æ•°æ®çš„æŒ‡é’ˆ</span>
  â€¦â€¦
<span class="token punctuation">}</span></code></pre><h3 id="heading-12">2. redisç¼–ç ç±»å‹</h3><p>ç¼–ç ç±»å‹ï¼š</p> <table><thead><tr><th>ç¼–ç å¸¸é‡</th> <th>ç¼–ç å¯¹åº”çš„åº•å±‚æ•°æ®ç»“æ„</th></tr></thead> <tbody><tr><td>redis_encoding_int</td> <td>longç±»å‹çš„æ•´å‹</td></tr> <tr><td>redis_encoding_embstr</td> <td>embstrç¼–ç çš„ç®€å•åŠ¨æ€å­—ç¬¦ä¸²</td></tr> <tr><td>redis_encoding_raw</td> <td>ç®€å•åŠ¨æ€å­—ç¬¦ä¸²</td></tr> <tr><td>redis_encoding_ht</td> <td>HashTable</td></tr> <tr><td>redis_encoding_linkedlist</td> <td>åŒå‘é“¾è¡¨</td></tr> <tr><td>redis_encoding_ziplist</td> <td>å‹ç¼©åˆ—è¡¨</td></tr> <tr><td>redis_encoding_intset</td> <td>æ•´æ•°é›†åˆ</td></tr> <tr><td>redis_encoding_skiplist</td> <td>è·³è·ƒè¡¨å’Œå­—å…¸</td></tr></tbody></table> <h3 id="heading-13">3. åº•å±‚ç»“æ„</h3><h4 id="heading-14">3.1 ziplist</h4><p>å‹ç¼©åˆ—è¡¨æ˜¯ Redis è‡ªå·±è®¾è®¡çš„ä¸€ç§æ•°æ®å­˜å‚¨ç»“æ„ã€‚å®ƒæœ‰ç‚¹å„¿ç±»ä¼¼æ•°ç»„ï¼Œé€šè¿‡ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨æ•°æ®ã€‚ä¸è¿‡ï¼Œå®ƒè·Ÿæ•°ç»„ä¸åŒçš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒå…è®¸å­˜å‚¨çš„æ•°æ®å¤§å°ä¸åŒã€‚å…·ä½“çš„å­˜å‚¨ç»“æ„ä¹Ÿéå¸¸ç®€å•</p> <p><div class="image-preview" data-v-eab015b2><img src="https://static.mittacy.com/blog/20200921230706.jpg" alt="ziplist" title="" class="image" data-v-771e5855 data-v-eab015b2><!----></div></p> <p>å‹ç¼©åˆ—è¡¨è¿™ç§å­˜å‚¨ç»“æ„ï¼Œä¼˜ç‚¹ï¼š</p> <ul><li>ä¸€æ–¹é¢æ¯”è¾ƒèŠ‚çœå†…å­˜</li> <li>å¦ä¸€æ–¹é¢å¯ä»¥æ”¯æŒä¸åŒç±»å‹æ•°æ®çš„å­˜å‚¨</li> <li>è€Œä¸”ï¼Œå› ä¸ºæ•°æ®å­˜å‚¨åœ¨ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œé€šè¿‡é”®æ¥è·å–å€¼ä¸ºåˆ—è¡¨ç±»å‹çš„æ•°æ®ï¼Œè¯»å–çš„æ•ˆç‡ä¹Ÿéå¸¸é«˜</li></ul> <h4 id="heading-15">3.2 linkedlist</h4><p>Redis çš„è¿™ç§åŒå‘é“¾è¡¨çš„å®ç°æ–¹å¼ï¼Œéå¸¸å€¼å¾—å€Ÿé‰´ã€‚å®ƒé¢å¤–å®šä¹‰ä¸€ä¸ª list ç»“æ„ä½“ï¼Œæ¥ç»„ç»‡é“¾è¡¨çš„é¦–ã€å°¾æŒ‡é’ˆï¼Œè¿˜æœ‰é•¿åº¦ç­‰ä¿¡æ¯ã€‚è¿™æ ·ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™å°±ä¼šéå¸¸æ–¹ä¾¿ã€‚</p> <pre class="language-text"><code tabindex="0" class="language-text">// ä»¥ä¸‹æ˜¯Cè¯­è¨€ä»£ç ï¼Œå› ä¸ºRedisæ˜¯ç”¨Cè¯­è¨€å®ç°çš„ã€‚
typedef struct listnode {
  struct listNode *prev;
  struct listNode *next;
  void *value;
} listNode;

typedef struct list {
  listNode *head;
  listNode *tail;
  unsigned long len;
  // ....çœç•¥å…¶ä»–å®šä¹‰
} list;</code></pre><h4 id="heading-16">3.3 å­—å…¸</h4><p>Redis ä½¿ç”¨<code>MurmurHash2</code>è¿™ç§è¿è¡Œé€Ÿåº¦å¿«ã€éšæœºæ€§å¥½çš„å“ˆå¸Œç®—æ³•ä½œä¸ºå“ˆå¸Œå‡½æ•°ã€‚å¯¹äºå“ˆå¸Œå†²çªé—®é¢˜ï¼ŒRedis ä½¿ç”¨é“¾è¡¨æ³•æ¥è§£å†³ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒRedis è¿˜æ”¯æŒæ•£åˆ—è¡¨çš„åŠ¨æ€æ‰©å®¹ã€ç¼©å®¹ã€‚</p> <ul><li>å½“æ•°æ®åŠ¨æ€å¢åŠ ä¹‹åï¼Œæ•£åˆ—è¡¨çš„è£…è½½å› å­ä¼šä¸åœåœ°å˜å¤§ã€‚å½“è£…è½½å› å­å¤§äº 1 çš„æ—¶å€™ï¼ŒRedis ä¼šè§¦å‘æ‰©å®¹ï¼Œå°†æ•£åˆ—è¡¨æ‰©å¤§ä¸ºåŸæ¥å¤§å°çš„ 2 å€å·¦å³ï¼ˆå…·ä½“å€¼éœ€è¦è®¡ç®—æ‰èƒ½å¾—åˆ°ï¼‰</li> <li>å½“æ•°æ®åŠ¨æ€å‡å°‘ä¹‹åï¼Œä¸ºäº†èŠ‚çœå†…å­˜ï¼Œå½“è£…è½½å› å­å°äº 0.1 çš„æ—¶å€™ï¼ŒRedis å°±ä¼šè§¦å‘ç¼©å®¹ï¼Œç¼©å°ä¸ºå­—å…¸ä¸­æ•°æ®ä¸ªæ•°çš„å¤§çº¦ 2 å€å¤§å°ï¼ˆè¿™ä¸ªå€¼ä¹Ÿæ˜¯è®¡ç®—å¾—åˆ°çš„ï¼‰</li></ul> <p>æ‰©å®¹ç¼©å®¹è¦åšå¤§é‡çš„æ•°æ®æ¬ç§»å’Œå“ˆå¸Œå€¼çš„é‡æ–°è®¡ç®—ï¼Œæ‰€ä»¥æ¯”è¾ƒè€—æ—¶ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼ŒRedis ä½¿ç”¨æ¸è¿›å¼æ‰©å®¹ç¼©å®¹ç­–ç•¥ï¼Œå°†æ•°æ®çš„æ¬ç§»åˆ†æ‰¹è¿›è¡Œï¼Œé¿å…äº†å¤§é‡æ•°æ®ä¸€æ¬¡æ€§æ¬ç§»å¯¼è‡´çš„æœåŠ¡åœé¡¿ã€‚</p> <h4 id="heading-17">3.4 skipList</h4><p>ä½¿ç”¨äº†zsetç»“æ„ï¼ŒåŒ…å«ä¸€ä¸ªå­—å…¸å’Œä¸€ä¸ªè·³è·ƒè¡¨</p> <pre class="language-c"><code tabindex="0" class="language-c">type <span class="token keyword">struct</span> <span class="token class-name">zset</span> <span class="token punctuation">{</span>
  Zskiplist <span class="token operator">*</span>zsl<span class="token punctuation">;</span>
  dict <span class="token operator">*</span>dict<span class="token punctuation">;</span>
  â€¦â€¦
<span class="token punctuation">}</span></code></pre><h3 id="heading-18">4. æ•°æ®ç±»å‹ä½¿ç”¨çš„ç»“æ„</h3><p>æ¯ç§Objectå¯¹è±¡è‡³å°‘æœ‰ä¸¤ç§ä¸åŒçš„ç¼–ç ï¼Œå¯¹åº”å…³ç³»ï¼š</p> <h4 id="heading-19">4.1 String</h4><ul><li>int  <code>æ•´æ•°å€¼å®ç°</code></li> <li>embstr  <code>sds &lt;= 39å­—èŠ‚</code></li> <li>raw  <code>sdså®ç° &gt;= 39å­—èŠ‚</code></li></ul> <h4 id="heading-20">4.2 List</h4><ul><li>ziplist å‹ç¼©åˆ—è¡¨</li> <li>linkedlist åŒå‘åˆ—è¡¨</li></ul> <p>ä½¿ç”¨ziplistæ¡ä»¶ï¼š</p> <ol><li>listå¯¹è±¡ä¿å­˜çš„æ‰€æœ‰å­—ç¬¦ä¸²å…ƒç´ é•¿åº¦éƒ½å°äº64å­—èŠ‚</li> <li>listå¯¹è±¡ä¿å­˜çš„å…ƒç´ æ•°é‡å°äº512ä¸ª</li></ol> <h4 id="heading-21">4.3 Hash</h4><ul><li>ziplist  å‹ç¼©åˆ—è¡¨<ul><li>ä¿å­˜åŒä¸€ä¸ªé”®å€¼å¯¹çš„ä¸¤ä¸ªèŠ‚ç‚¹ç´§é ç›¸é‚»ï¼Œé”®keyåœ¨å‰ï¼Œå€¼valueåœ¨å</li> <li>å…ˆä¿å­˜çš„é”®å€¼å¯¹åœ¨å‹ç¼©åˆ—è¡¨çš„è¡¨å¤´</li></ul></li> <li>hashtable  å“ˆå¸Œ<ul><li>å­—å…¸çš„é”®ä½å­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¿å­˜é”®key</li> <li>å€¼ä¹Ÿä¸ºå­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¿å­˜é”®å€¼å¯¹çš„å€¼</li></ul></li></ul> <p>ä½¿ç”¨ziplistæ¡ä»¶ï¼š</p> <ol><li>listå¯¹è±¡ä¿å­˜çš„æ‰€æœ‰å­—ç¬¦ä¸²å…ƒç´ çš„é•¿åº¦éƒ½å°äº64å­—èŠ‚</li> <li>ä¿å­˜çš„å…ƒç´ æ•°é‡å°äº512ä¸ª</li></ol> <p>è¿™ä¸¤ä¸ªä¸Šé™å€¼æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œé…ç½®æ–‡ä»¶<code>hash-max-zaiplist-value</code>å’Œ<code>hash-max-ziplist-entries</code></p> <h4 id="heading-22">4.4 Set</h4><ul><li>intset  <code>ä½¿ç”¨æ•´æ•°é›†åˆä½œä¸ºåº•å±‚å®ç°ï¼Œsetå¯¹è±¡åŒ…å«çš„æ‰€æœ‰å…ƒç´ éƒ½è¢«ä¿å­˜åœ¨intsetæ•´æ•°é›†åˆé‡Œé¢</code></li> <li>hashtable  <code>ä½¿ç”¨æ•£åˆ—è¡¨keyå­˜å‚¨ä¸€ä¸ªsetå…ƒç´ ï¼Œè€Œæ•£åˆ—è¡¨valueéƒ½ä¸ºnull</code></li></ul> <p>ä½¿ç”¨intsetæ¡ä»¶ï¼š</p> <ol><li>ä¿å­˜çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ•´æ•°å€¼</li> <li>ä¿å­˜çš„å…ƒç´ æ•°é‡ä¸è¶…è¿‡512ä¸ª</li></ol> <h4 id="heading-23">4.5 Zset</h4><ul><li><p>ziplist</p> <ul><li>æ¯ä¸ªé›†åˆå…ƒç´ ä½¿ç”¨ç›¸é‚»çš„ä¸¤ä¸ªå‹ç¼©åˆ—è¡¨ç»“ç‚¹ä¿å­˜ï¼Œä¸€ä¸ªä¿å­˜å…ƒç´ æˆå‘˜ï¼Œä¸€ä¸ªä¿å­˜å…ƒç´ çš„åˆ†å€¼ï¼Œç„¶åæ ¹æ®åˆ†æ•°è¿›è¡Œä»å¤§åˆ°å°æ’åº</li></ul></li> <li><p>skiplist</p></li></ul> <p>ä½¿ç”¨ziplistæ¡ä»¶ï¼š</p> <ol><li>æœ‰åºé›†åˆä¿å­˜çš„å…ƒç´ æ•°é‡å°äº128ä¸ª</li> <li>æœ‰åºé›†åˆä¿å­˜çš„æ‰€æœ‰å…ƒç´ çš„é•¿åº¦éƒ½å°äº64å­—èŠ‚</li></ol> <p>å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ä¸­ <code>zset-max-ziplist-entries</code> å’Œ <code>zset-max-ziplist-value</code> ä¿®æ”¹</p> <h2 id="heading-24">ä¸‰. æ•°æ®åº“æ“ä½œ</h2><ul><li>Select åˆ‡æ¢åˆ°æŒ‡å®šçš„æ•°æ®åº“ï¼Œæ•°æ®åº“ç´¢å¼•å· <code>index</code> ç”¨æ•°å­—å€¼æŒ‡å®šï¼Œä»¥ <code>0</code> ä½œä¸ºèµ·å§‹ç´¢å¼•å€¼</li> <li>Exists åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</li> <li>Type è¿”å›keyçš„ç±»å‹</li> <li>Rename é‡å‘½åkeyï¼Œå¦‚æœnewNameå­˜åœ¨ï¼Œåˆ™è¦†ç›–åŸæ•°æ®</li> <li>RenameNX ä»…å½“newNameä¸å­˜åœ¨æ—¶æ‰æ“ä½œä¿®æ”¹keyçš„nameä¸ºnewName</li> <li>Move ç§»åŠ¨keyåˆ°å…¶ä»–æ•°æ®åº“</li> <li>RandomKey éšæœºè¿”å›ä¸€ä¸ªkey</li> <li>DBSize è¿”å›å½“å‰æ•°æ®åº“çš„keyæ•°é‡</li> <li>Keys<ul><li><code>KEYS *</code> åŒ¹é…æ•°æ®åº“ä¸­æ‰€æœ‰ <code>key</code></li> <li><code>KEYS h?llo</code> åŒ¹é… <code>hello</code> ï¼Œ <code>hallo</code> å’Œ <code>hxllo</code> ç­‰</li> <li><code>KEYS h*llo</code> åŒ¹é… <code>hllo</code> å’Œ <code>heeeeello</code> ç­‰</li> <li><code>KEYS h[ae]llo</code> åŒ¹é… <code>hello</code> å’Œ <code>hallo</code> ï¼Œä½†ä¸åŒ¹é… <code>hillo</code></li></ul></li> <li>FlushDB æ¸…ç©ºå½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰ key</li> <li>FlushAll æ¸…ç©ºæ•´ä¸ª Redis æœåŠ¡å™¨çš„æ•°æ®(åˆ é™¤æ‰€æœ‰æ•°æ®åº“çš„æ‰€æœ‰ key )</li> <li>SwapDB äº¤æ¢ä¸¤ä¸ªæ•°æ®åº“çš„æ•°æ®</li> <li>Scan <code>SCAN cursor [MATCH pattern] [COUNT count]</code></li></ul> <h2 id="heading-25">å››. äº‹åŠ¡</h2><p>äº‹åŠ¡ä¸­çš„å¤šæ¡å‘½ä»¤è¢«ä¸€æ¬¡æ€§å‘é€ç»™æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯ä¸€æ¡ä¸€æ¡åœ°å‘é€ï¼Œè¿™ç§æ–¹å¼è¢«ç§°ä¸ºæµæ°´çº¿ï¼Œå®ƒå¯ä»¥å‡å°‘å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œé€šä¿¡æ¬¡æ•°ä»è€Œæå‡æ€§èƒ½</p> <p>Redis æœ€ç®€å•çš„äº‹åŠ¡å®ç°æ–¹å¼æ˜¯ä½¿ç”¨ <code>MULTI</code> å’Œ <code>EXEC</code> å‘½ä»¤å°†äº‹åŠ¡æ“ä½œåŒ…å›´èµ·æ¥</p> <p>ä¸åŒäºMysqläº‹åŠ¡ï¼Œè¿™ç§äº‹åŠ¡å¦‚æœåœ¨ä¸­é—´æ‰§è¡Œé‡åˆ°é”™è¯¯å¤±è´¥äº†ï¼Œå°±ä¼šä¸­æ–­äº‹åŠ¡åç»­çš„å‘½ä»¤å°±ä¸ä¼šæ‰§è¡Œï¼Œ<strong>ä½†æ˜¯å‰é¢å·²ç»æ‰§è¡Œç”Ÿæ•ˆçš„ä¸ä¼šå›æ»š</strong></p> <pre class="language-shell"><code tabindex="0" class="language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> MULTI
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> æ“ä½œå‘½ä»¤
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> EXEC</code></pre><p><strong>Redis äº‹åŠ¡å‘½ä»¤</strong>
redis äº‹åŠ¡çš„ç›¸å…³å‘½ä»¤ï¼š</p> <ul><li><strong>DISCARD</strong> å–æ¶ˆäº‹åŠ¡ï¼Œæ”¾å¼ƒæ‰§è¡Œäº‹åŠ¡å—å†…çš„æ‰€æœ‰å‘½ä»¤ã€‚</li> <li><strong>EXEC</strong> æ‰§è¡Œæ‰€æœ‰äº‹åŠ¡å—å†…çš„å‘½ä»¤ã€‚</li> <li><strong>MULTI</strong> æ ‡è®°ä¸€ä¸ªäº‹åŠ¡å—çš„å¼€å§‹ã€‚</li> <li><strong>UNWATCH</strong> å–æ¶ˆ WATCH å‘½ä»¤å¯¹æ‰€æœ‰ key çš„ç›‘è§†ã€‚</li> <li><strong>WATCH key [key â€¦]</strong> ç›‘è§†ä¸€ä¸ª (æˆ–å¤šä¸ª) key ï¼Œå¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œä¹‹å‰è¿™ä¸ª (æˆ–è¿™äº›) key è¢«å…¶ä»–å‘½ä»¤æ‰€æ”¹åŠ¨ï¼Œé‚£ä¹ˆäº‹åŠ¡å°†è¢«æ‰“æ–­ã€‚</li></ul> <h2 id="heading-26">äº”. æŒä¹…åŒ–</h2><h3 id="heading-27">1. æ•°æ®ç»“æ„çš„æŒä¹…åŒ–</h3><p>Redis çš„æ•°æ®æ ¼å¼ç”±â€œé”®â€å’Œâ€œå€¼â€ä¸¤éƒ¨åˆ†ç»„æˆã€‚è€Œâ€œå€¼â€åˆæ”¯æŒå¾ˆå¤šæ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å­—å…¸ã€é›†åˆã€æœ‰åºé›†åˆã€‚åƒå­—å…¸ã€é›†åˆç­‰ç±»å‹ï¼Œåº•å±‚ç”¨åˆ°äº†æ•£åˆ—è¡¨ï¼Œæ•£åˆ—è¡¨ä¸­æœ‰æŒ‡é’ˆçš„æ¦‚å¿µï¼Œè€ŒæŒ‡é’ˆæŒ‡å‘çš„æ˜¯å†…å­˜ä¸­çš„å­˜å‚¨åœ°å€ã€‚ é‚£ Redis æ˜¯å¦‚ä½•å°†è¿™æ ·ä¸€ä¸ªè·Ÿå…·ä½“å†…å­˜åœ°å€æœ‰å…³çš„æ•°æ®ç»“æ„å­˜å‚¨åˆ°ç£ç›˜ä¸­çš„å‘¢ï¼Ÿ</p> <p>è¿™ä¸ªé—®é¢˜å¹¶ä¸ç‰¹æ®Šï¼Œå¾ˆå¤šåœºæ™¯ä¸­éƒ½ä¼šé‡åˆ°ã€‚æˆ‘ä»¬æŠŠå®ƒå«ä½œæ•°æ®ç»“æ„çš„æŒä¹…åŒ–é—®é¢˜ï¼Œæˆ–è€…å¯¹è±¡çš„æŒä¹…åŒ–é—®é¢˜ã€‚è¿™é‡Œçš„â€œæŒä¹…åŒ–â€ï¼Œå¯ä»¥ç¬¼ç»Ÿåœ°ç†è§£ä¸ºâ€œå­˜å‚¨åˆ°ç£ç›˜â€ã€‚</p> <p>ä¸»è¦æœ‰ä¸¤ç§è§£å†³æ€è·¯ï¼š</p> <ul><li><strong>æ¸…é™¤åŸæœ‰çš„å­˜å‚¨ç»“æ„</strong>ï¼Œåªå°†æ•°æ®å­˜å‚¨åˆ°ç£ç›˜ä¸­ã€‚å½“æˆ‘ä»¬éœ€è¦ä»ç£ç›˜è¿˜åŸæ•°æ®åˆ°å†…å­˜çš„æ—¶å€™ï¼Œå†é‡æ–°å°†æ•°æ®ç»„ç»‡æˆåŸæ¥çš„æ•°æ®ç»“æ„ã€‚å®é™…ä¸Šï¼ŒRedis é‡‡ç”¨çš„å°±æ˜¯è¿™ç§æŒä¹…åŒ–æ€è·¯ã€‚è¿™ç§æ–¹å¼ä¹Ÿæœ‰ä¸€å®šçš„å¼Šç«¯ã€‚é‚£å°±æ˜¯æ•°æ®ä»ç¡¬ç›˜è¿˜åŸåˆ°å†…å­˜çš„è¿‡ç¨‹ï¼Œä¼šè€—ç”¨æ¯”è¾ƒå¤šçš„æ—¶é—´</li> <li><strong>ä¿ç•™åŸæ¥çš„å­˜å‚¨æ ¼å¼</strong>ï¼Œå°†æ•°æ®æŒ‰ç…§åŸæœ‰çš„æ ¼å¼å­˜å‚¨åœ¨ç£ç›˜ä¸­ã€‚æˆ‘ä»¬æ‹¿æ•£åˆ—è¡¨è¿™æ ·çš„æ•°æ®ç»“æ„æ¥ä¸¾ä¾‹ã€‚æˆ‘ä»¬å¯ä»¥å°†æ•£åˆ—è¡¨çš„å¤§å°ã€æ¯ä¸ªæ•°æ®è¢«æ•£åˆ—åˆ°çš„æ§½çš„ç¼–å·ç­‰ä¿¡æ¯ï¼Œéƒ½ä¿å­˜åœ¨ç£ç›˜ä¸­ã€‚æœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬ä»ç£ç›˜ä¸­å°†æ•°æ®è¿˜åŸåˆ°å†…å­˜ä¸­çš„æ—¶å€™ï¼Œå°±å¯ä»¥é¿å…é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ã€‚</li></ul> <h3 id="heading-28">2. redisæŒä¹…åŒ–</h3><pre class="language-sql"><code tabindex="0" class="language-sql"><span class="token comment">-- è·å–rediså®‰è£…ç›®å½•</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">></span> config get dir
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"dir"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"/usr/local/var/db/redis"</span>
<span class="token comment">-- å¤‡ä»½æ•°æ®(æ‰€æœ‰æ•°æ®åº“)ï¼Œå°†åœ¨rediså®‰è£…ç›®å½•ç”Ÿæˆdump.rdbæ–‡ä»¶</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">></span> <span class="token keyword">save</span>
<span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span>:<span class="token number">6379</span><span class="token operator">></span> Bgsave    <span class="token comment">-- åœ¨åå°ä¿å­˜</span>
<span class="token comment">-- æ¢å¤æ•°æ®ï¼Œåªéœ€å°†å¤‡ä»½æ–‡ä»¶ (dump.rdb) ç§»åŠ¨åˆ° redis å®‰è£…ç›®å½•å¹¶å¯åŠ¨æœåŠ¡å³å¯</span></code></pre><h4 id="heading-29">2.1 RDBæŒä¹…åŒ–</h4><p>å³å¿«ç…§å¼ä¿å­˜ã€‚RedisæŠŠæ•°æ®å¿«ç…§å­˜æ”¾åœ¨ç£ç›˜ä¸Šçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶åä¸ºdump.rdbã€‚å¯ä»¥é…ç½®Redisçš„æŒä¹…åŒ–ç­–ç•¥ï¼Œä¾‹å¦‚æ•°æ®é›†ä¸­æ¯Nç§’é’Ÿæœ‰è¶…è¿‡Mæ¬¡æ›´æ–°ï¼Œå°±å°†æ•°æ®å†™å…¥ç£ç›˜ï¼›æˆ–è€…ä½ å¯ä»¥æ‰‹å·¥è°ƒç”¨å‘½ä»¤SAVEæˆ–BGSAVE</p> <h4 id="heading-30">2.2 AOFæŒä¹…åŒ–</h4><p><em>å°†å†™å‘½ä»¤æ·»åŠ åˆ° AOF æ–‡ä»¶æœ«å°¾</em>
é€‰é¡¹åŒæ­¥é¢‘ç‡ï¼šalwaysæ¯ä¸ªå†™å‘½ä»¤éƒ½åŒæ­¥ã€eyerysecæ¯ç§’åŒæ­¥ä¸€æ¬¡ã€noè®©æ“ä½œç³»ç»Ÿæ¥å†³å®šä½•æ—¶åŒæ­¥</p> <ul><li>   always é€‰é¡¹ä¼šä¸¥é‡å‡ä½æœåŠ¡å™¨çš„æ€§èƒ½</li> <li>   everysec æ¯”è¾ƒåˆé€‚ï¼Œå¯ä»¥ä¿è¯ç³»ç»Ÿå´©æºƒæ—¶åªä¼šä¸¢å¤±ä¸€ç§’å·¦å³çš„æ•°æ®ï¼Œå¹¶ä¸” Redis æ¯ç§’æ‰§è¡Œä¸€æ¬¡åŒæ­¥å¯¹æœåŠ¡å™¨å‡ ä¹æ²¡æœ‰ä»»ä½•å½±å“</li> <li> no é€‰é¡¹å¹¶ä¸èƒ½ç»™æœåŠ¡å™¨æ€§èƒ½å¸¦æ¥å¤šå¤§çš„æå‡ï¼Œè€Œä¸”ä¼šå¢åŠ ç³»ç»Ÿå´©æºƒæ—¶æ•°æ®ä¸¢å¤±çš„æ•°é‡ã€‚
  éšç€æœåŠ¡å™¨å†™è¯·æ±‚çš„å¢å¤šï¼ŒAOF æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ã€‚Redis æä¾›äº†ä¸€ç§å°† AOF é‡å†™çš„ç‰¹æ€§ï¼Œèƒ½å¤Ÿå»é™¤ AOF æ–‡ä»¶ä¸­çš„å†—ä½™å†™å‘½ä»¤</li></ul></div><div class="info info" data-v-01771278 data-v-d95f0bf6><span class="info-block" data-v-01771278>å‘å¸ƒäº: 2020/10/5</span><span class="info-block" data-v-01771278>ç±»åˆ«: <a href="/blog/?category=%E7%BC%93%E5%AD%98%E8%AE%BE%E8%AE%A1" data-v-01771278>ç¼“å­˜è®¾è®¡</a></span></div><div class="recommend" data-v-54a33415 data-v-d95f0bf6><div class="recommend-block recommend-last" data-v-54a33415 data-v-d95f0bf6><a href="/blog/article/1630739392757" data-v-d95f0bf6><span class="recommend-block-text" data-v-d95f0bf6>ä¸Šä¸€ç¯‡: </span><span data-v-d95f0bf6>Windowsé‡è£…ç³»ç»Ÿ</span></a></div><div class="recommend-block recommend-next" data-v-54a33415 data-v-d95f0bf6><a href="/blog/article/1630740355433" data-v-d95f0bf6><span class="recommend-block-text" data-v-d95f0bf6>ä¸‹ä¸€ç¯‡: </span><span data-v-d95f0bf6>æœç´¢å¼•æ“çº é”™åŠŸèƒ½</span></a></div></div><div class="line" data-v-c80b520e data-v-d95f0bf6></div></div><div class="catalogue-wrapper catalogue-wrapper_untoggle" data-v-d95f0bf6><div class="catalogue-card_untoggle-wrapper catalogue" data-v-ce68c092 data-v-d95f0bf6><div class="card catalogue-card_untoggle" data-v-54a33415 data-v-ce68c092><svg aria-hidden="true" class="icon" data-v-292518fe data-v-ce68c092><use xlink:href="#icon-catalogue" data-v-292518fe></use></svg></div></div></div></div></div></div><div class="footer" data-v-fdb56dc8 data-v-7ba5bd90><section class="footer-section" data-v-fdb56dc8>Â©2022 Mittacy's Blog. All rights reserved</section><section class="footer-section" data-v-fdb56dc8><a href="https://beian.miit.gov.cn" target="_blank" rel="noopener noreferrer" data-v-fdb56dc8>å¤‡æ¡ˆå·: ç²¤ICPå¤‡2021130319å·-1</a></section></div><div class="back-top back-top" style="bottom:60px;right:60px;" data-v-876fde0e data-v-7ba5bd90><svg aria-hidden="true" class="icon" data-v-292518fe data-v-876fde0e><use xlink:href="#icon-rocket" data-v-292518fe></use></svg></div></div><script src="/blog/static/js/chunk-vendors.98aa2d5e.js" defer></script><script src="/blog/static/js/chunk-4b00a56a.f60616c1.js" defer></script><script src="/blog/static/js/chunk-d54686c8.5143f685.js" defer></script><script src="/blog/static/js/app.41aa715e.js" defer></script>
    <script src="//at.alicdn.com/t/font_2712780_iw7teim8vh.js"></script>
    
  </body>
</html>
